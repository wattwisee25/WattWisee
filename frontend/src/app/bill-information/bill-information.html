<div class="bill-information-page">
  <div class="up">
    <img src="assets/img/logo.png" alt="WattWise logo" class="logo" />
    <button class="finish-btn" (click)="goBack()">Finish</button>
  </div>

  <div class="container">
    <h2 *ngIf="billType === 'electricity'">Electricity bill information</h2>
    <h2 *ngIf="billType === 'oil'">Oil bill information</h2>
    <h2 *ngIf="billType === 'lpg'">LPG bill information</h2>

    <p style="color: #555">We require 12 months bills for an accurate energy profile</p>

    <div class="form-container">

      <!-- Electricity form -->
      <form *ngIf="billType === 'electricity'" (ngSubmit)="saveBill()">
        <div class="input-container" *ngFor="let field of electricityFields">
          <ng-container *ngIf="field.type !== 'file'; else fileInput">
            <input [type]="field.type" [(ngModel)]="currentBill.data[field.key]" [name]="field.key" placeholder=" " />
            <label>{{ field.label }}</label>
          </ng-container>
          <ng-template #fileInput>
            <input type="file" (change)="onFileSelected($event, field.key)" />
            <label>{{ field.label }}</label>
          </ng-template>
        </div>
        <div class="btn-container">
          <button type="submit" class="upload-btn">Save</button>
        </div>
      </form>

      <!-- Oil form -->
      <form *ngIf="billType === 'oil'" (ngSubmit)="saveBill()">
        <div class="input-container" *ngFor="let field of oilFields">
          <ng-container *ngIf="field.type !== 'file'; else fileInputOil">
            <input [type]="field.type" [(ngModel)]="currentBill.data[field.key]" [name]="field.key" placeholder=" " />
            <label>{{ field.label }}</label>
          </ng-container>
          <ng-template #fileInputOil>
            <input type="file" (change)="onFileSelected($event, field.key)" />
            <label>{{ field.label }}</label>
          </ng-template>
        </div>
        <div class="btn-container">
          <button type="submit" class="upload-btn">Save</button>
        </div>
      </form>

      <!-- LPG form -->
      <form *ngIf="billType === 'lpg'" (ngSubmit)="saveBill()">
        <div class="input-container" *ngFor="let field of lpgFields">
          <ng-container *ngIf="field.type !== 'file'; else fileInputLpg">
            <input [type]="field.type" [(ngModel)]="currentBill.data[field.key]" [name]="field.key" placeholder=" " />
            <label>{{ field.label }}</label>
          </ng-container>
          <ng-template #fileInputLpg>
            <input type="file" (change)="onFileSelected($event, field.key)" />
            <label>{{ field.label }}</label>
          </ng-template>
        </div>
        <div class="btn-container">
          <button type="submit" class="upload-btn">Save</button>
        </div>
      </form>

    </div>
  </div>

  <div class="navigation-buttons">
    <button (click)="back()" [disabled]="currentIndex === 0" class="back-btn">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
        <path d="M5 12l14 0" />
        <path d="M5 12l4 4" />
        <path d="M5 12l4 -4" />
      </svg>
      Previous
    </button>

    <p>{{ getIndicator() }}</p>

    <button (click)="next()" class="skip-btn">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
        class="icon icon-tabler icons-tabler-outline icon-tabler-plus">
        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
        <path d="M12 5l0 14" />
        <path d="M5 12l14 0" />
      </svg>New
    </button>
  </div>
</div>

<div class="back-button">
  <app-back-button></app-back-button>
</div>
